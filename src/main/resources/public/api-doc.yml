openapi: 3.0.1

info:
  title: Xenon API
  description: |-
    Para obter mais informações sobre o desenvolvimento
    acessar o [github](https://github.com/MarcusViniciusCavalcanti/xenon-backend).


    ## Overview

    Api para o sistema Xenon, de alunos para alunos.

    Esta api está agnostica de clientes deste que uso protocolos, **HTTP**, seja ele a aplicação de reconhecimento
    ou web.

    ## Começando

    Esta documentação ira auxiliar em novas implementações de __clients sides__, dando uma base
    de como manipular os recursos que a API provem.

    ### HTTP Verbs

    Esta Api foi construída a seguir os padrões RESTFull, tentando aderir o mais próximo
    possíveis das convenções uso dos verbos HTTP.


    | Verbo     | Utilização                                      |
    | :-------: | :---------------------------------------------- |
    | `GET`     | Usado para recuperar recursos                   |
    | `POST`    | Usado para criar um recurso                     |
    | `PUT`     | Usado para atualizar um recurso                 |
    | `PATCH`   | Usado para atualizar um parcialmente um recurso |
    | `DELETE`  | Usado para remover um recurso existente         |

    ### HTTP status codes

    Esta Api foi construída seguindo os padrões RESTFull, tentando aderir o mais próximo
    possíveis as suas convenções em seu uso dos códigos de Status HTTP.

    | Status code                    | Utilização                                                                                                                          |
    | :----------------------------: | :---------------------------------------------------------------------------------------------------------------------------------- |
    | ``200 OK``                     | Para requisições aceitas e processadas                                                                                              |
    | ``201 Created``                | Um novo recurso foi criado com sucesso                                                                                              |
    | ``400 Bad Request``            | Requisição negada, pois está mal formatada, exemplo de retorno de erro quando a falta de um atributo, no corpo da mensagem          |
    | ``409 Conflict``               | O recurso já existe com as informações dada                                                                                         |
    | ``422 Unprocessable Entity``   | Requisição negada, pois não passou na validação da requisição, um atributo nulo ou ultrapassou o limite de caracteres, são exemplos |
    | ``500 Internal Server Error``  | Houve um problema de processamento interno.                                                                                         |

    ### Não Autenticado
    Caso a requisição não contenha o header acima, excluido as que não carece de autenticação, será retornar uma mensagem
    de error com **status code** `401`.

    ### Não Autorizado
    Para os casos de não autorizado, a mensagem de erro retornada será com **status code** `403`.

    ## Header

    Api em alguns casos, impôe aos clientes na requisição dicione alguns Headers obrigatórios,
    outros são opicionais porém para melhor resposta da requisição é recomendado incluir os Headers
    aqui dispostos.


    ### Accept-Language
    Api fara a tradução de texto com base neste header, caso o valor do idioma não ouver tradução,
    o idioma será o inglês.

    __Importante resultar que Api utilizara o primeiro elemento do valor do header.__

    Por exemplo:
    `Accept-Language: en-US,en,pt` neste caso a api utilizara como idioma de resposta o valor de:
    __en-US__

    Atualmente a API suporta os seguites idiomas:
    * Inglês en-US
    * Portugues do brasil pt-BR

  contact:
    email: cavalcanti@alunos.utfpr.edu.br
  version: 1.0.0
  license:
    name: "Apache 2.0"
    url: "https://www.apache.org/licenses/LICENSE-2.0.html"

servers:
  - url: 'http://localhost:8080/api'
    description: 'Servidor de aplicação de homologação'

tags:
  - name: Security
    x-displayName: Segurança.
    description: |-
      As requisições feitas para Api serão STATELESS (**Sem estado**), logo a utilização de Token para
      autorizar uma determinada requisição se faz necessário, assim a Api para Autorizar e autenticar um usuário
      fica a cargo do JWT.

      Uma vez o usuário autorizado o será retornado no corpo da mensagem o token JWE e seu tempo de expiração.

      ### Solicitando token
      Para fazer as solicitações de pedido de token é necessário acessar a url __/api/login__
      enviando login e senha

      ````
      {
        "email": "email@email.com",
        "password": "password"
      }
      ````

      Após o processo recebera como resposta um token para acessar os recursos que são necessário autorização.
      ````
      data: {
        "token": "<token>",
        "expiration": "36000",
      }
      ````
      Para mais informações verifique o schema do objeto Token, na sessão Schemas

      O status code da resposta será __OK__.

      Exceto as requisições advinda do dispositivo, deverá conter um Header `Authorization` contendo um portador (`Bearer`).
      O token que recebera da requisição de login, **corpo da resposta (value)**.

      Exemplo:

      ``Authorization: Bearer <TOKEN>``

      Algumas urls ou uris tem regras distintas para acesso, a qual será informada no campo `ROLE`, de cada requisição,
      verifique o nível de acesso em cada requisição, procurando pela informação de perfil necessário para requisição

      ### Não Autenticado
      Caso a requisição não contenha o header acima, excluido as que não carece de autenticação, será retornar uma mensagem
      de error com **status code** `401`.

      ### Não Autorizado
      Para os casos de não autorizado, a mensagem de erro retornada será com **status code** `403`.
  - name: Registry
    x-displayName: Cadastro de Estudante.
    description: |-
      Para ter acesso aos beneficios do sistema é necessário um cadastro.
      O cadastro do usuário pode ser feito por ele mesmo, ou o administrador do sistema pode inclui-lo.

      Para o primeiro caso, apenas estara disponível para alunos e algumas regras deve ser observadas:
      * O usuário deve ter um e-mail institucional, no dominíno ``@alunos.utfpr.edu.br``
      * O usuário deve obrigatóriamente, fazer o upload de um avatar da foto do usuário;
      * O usuário também deve obrigatóriamente, fazer o upload da foto ou pdf do documento do carro.

      Para essas regras serem correspondida, o sistema gera alguns passos para o cadastro do usuário:
      * Validar o e-mail institucional, será valido o e-mail;
      * Ativar conta, um e-mail será enviado com as instruções para o usuário ativar a conta.

      Após os passo informados acima, o aluno terá acesso ao sistema, porém deve ser observado que
      seu acesso ainda não está disponível, o aluno então deverá fazer o upload dos arquivos necessários
      __foto__, __documento do carro__, para então, poder ser liberado no sistema.

  - name: Profile
    x-displayname: Perfil
    description: |-
      O cliente usuário que representado por recurso Usuário onde as informações contidas no recursos, como por
      exemplo nome, e-mail, informações do carro, etc.

      São as informações do cliente usuário. As informações podem ser obtidas e manipuladas pelo __Profile__
      como por exemplo:
      * Recuperar as informações persistidas solicitando para `/me`
      * Altera o dado nome solicitando para `/change-name`
      * Adicionar um novo carro, solicitando para `/include-new-car`
      * Incluir o documento do carro adicionado, solicitando para `profile/car/{id}/document`
      * Removendo um carro já cadastrado, solicitando para `/remove-car`
      * Pedido uma nova a senha, solicitando para `/change-password`
      * Canelando sua conta, solicitando `/disabled-account`

      __OBS:__ Todas as solicitações é necessário que o cliente usuário esteja autenticado e seu token válido, dentro da data de validade.

      Uma vez incluido o carro, este recurso passara por uma analise humana, um usuário administrador
      poder avançar com o cadastro do carro do usuário em diferente status.

                                                                                +------------+
                                                                        +------>|  approved  |
                                                                        |       +------------+
                           +----------+          +-----------+          |
                           |  create  |--------->|  waiting  |--------->|
                           +----------+          +-----------+          |
                                                                        |       +------------+
                                                                        +------>|  reproved  |
                                                                                +------------+


      * create: O usuário faz o cadastro do carro, neste momento está aguardando o envio do documento.
      * waiting: O usuário já submeteu o documento do carro.
      * approved: o carro está cadastrado e autorizado no sistema.
      * reproved: o carro está cadastrado mas, não tem autorização para acessar o estacionamento.

  - name: User
    x-displayName: Usuários
    description: |-
      Recurso User representa um abstração de um usuário do sistema, este recurso contém todas as informações
      necessárias de um usuário do sistema exemplo:
      * Nome;
      * E-mail;
      * Tipo do usuário;
      * Papeis, e outros.


      Dentre outras informações, dentro deste recurso também está presente os papeis do usuário no sistema
      informação necessária para autorizar que este mesmo usuário acesse outros recursos da aplicação.

      O Xenon dispõe de 3 tipos de usuário:
      * `STUDENTS` usuário estudante
        * São todos os usuários alunos, da utfpr.
        * Este tipo de usuário poderá ter apenas perfil de `DRIVER` motorista.
      * `SERVICE` usuário servidor.
        * Corresponde a qualquer usuário que compõe o quadro de funcionários efetivos ou não.
        * O usuário `SERVICE` poderá ter papeis de `ADMIN` administrador, `OPERATOR` operador, `DRIVER` motorista.
      * `SPEAKER` usuário palestrante
        * São usuários palestrantes.
        * Assim como os usuários do tipo `STUDENTS` apenas é permitido o perfil `DRIVER`.

      Cada papel do usuário, lhe concede certas autorizações para manipular os recursos do sistema. Observe cada
      uri do recursos para observar qual papel é necessário para manipular o recurso, na sessão regras da solicitação.
  - name: Workstation
    x-displayName: Estações de trabalho
    description: |-
      Recurso Workstation represetna uma abstração de uma estação de trabalho, portões, monitoramento, são exemplos,
      da qual um dispositivo de reconhecimento está vinculada.

      Cada workstation tem apenas um único dispositivo, que fará comunicação via protocolo __Http__ podendo então, receber os reconhecimentos
      das placas, enviar comando para abrir cancelas, caso o dispositivo tenha a comunicação com a cancela ativada.

      As workstations contém 3 (três) atributos que para sua criação na Api são obrigatórios:
      * `name` Nome da estação;
      * `ip` ip do dispositivo que a estação está vinculada; e
      * `modo` modo de operação.


      Uma vez o Xenon receber um reconhecimento enviará para estação vinculada, é verificará as configurações dos modos de operação
      que por sua vez, definem como a estão enviaram os comandos de abertura de cancela, para o dispositivo de reconhecimento.
      Os modos disponiveis são:
      * __MANUAL__ (manual) neste requer ação do usuário enviar um comando para API notificar o dispositivo para abertura da cancela
      * __AUTOMATIC__ (automático) neste modo a api enviará um comando o dispositivo de abertura de cancela,
      sempre que um reconhecimento for validado com sucesso, isto quer dizer:
        * reconhecimento com taxa de confiabilidade no reconhecimento maior que 75%;
        * usuário cadastrado no sistema;
        * usuário tem acesso.
      * __NONE__ (destivado) neste modo o Xeno apenas enviaram a notificação de um reconhecimento.

      Importante resultar que apenas será autorizado requisições de reconhecimento de dispositivos vinculados a uma estação de trabalho.


      ### Tópicos
      Api dispõe para cada estação de trabalho dois tópicos sobre o protocolo __websock/stomp__, uma para
      receber os reconhecimentos que dispositivo vinculado enviou, e outro para enviar atualizações
      que houveram na estações de trabalho.

      `/api/ws` endpoint do websocket, para se conectar este endpoint e necessário autenticação, ou seja
      enviar também o header `Authorization`.

      * `/topic/change-workstation/{id}` para receber atualiações, um objeto como o exemplo abaixo será enviado:
      ```
      {
          "type": "UPDATE",
          "workstation": {
            "id": 1,
            "name": "Portão 10",
            "ip": "192.168.001.002",
            "mode": "MANUAL",
            "port": 9090
          }
      }
      ```

      Os tipos de atualizações possíveis:
      * __UPDATE__ atualização da estação de trabalho.
      * __DELETE__ a estação de trabalho foi removida.


      * `/topic/workstation/{id}/recognize` para receber reconhecimentos, um objeto como exemplo abaixo será enviado:
      ```
      {
          "recognizerId": "100",
          "confidence": 92.01182,
          "driverName: "Fulano de tal",
          "identifier": true,
          "authorized": true,
          "modelCar": "Gol",
          "plate": "UTB-0010",
          "userAvatar": "https://avatar.com.br/user.png"
      }
      ```

      __EXEMPLO DE CÓDIGO__

      ```javascript
            const headerName = 'Authorization';
            const token = 'Bearer <token>';

            const headers = {};
            headers[headerName] = token;

            const socket = new SockJS(`https://www.xenon:8080/api/ws`);
            stomp = Stomp.over(socket);
            stomp.connect(headers, function(frame) {
                stomp.subscribe('/topic/change-workstation/1', function(messageOutput) {
                    console.log("New Message: "+ messageOutput);
                });
            });
      ```
  - name: Recognizer
    x-displayName: Reconhecimento
    description: |-
      Recurso reconhecimento é o recurso que representa um tentativa de acesso ao sistema Xenon, conterá
      os dados que o dispositivo de reconhecimento de placa identificou, ou seja, uma placa válida.
      Este reconhecimento será avaliado para conceber o acesso ou não.

      Após receber o reconhecimento será vinculado a estação de trabalho, que originou o reconhecimento
      da qual notificará pelo websocket da estação de trabalho o resultado.
  - name: StateSystem
    x-displayName: Estado do Sistema Xenon.
    description: |-
      São recursos definei o estado do Sistema Xenon, quantidade de cadastros, usuários, estações de trabalho.
      Como também quantidade de reconhecimentos.

      Este recurso é interessante para construção de paineis de dasbhoar por exemplos.
      Todas as solicitações são cacheadas, com tempo médio de 5 minutos de vida útil.

      Os recursos propostos são:
      * WorkstationsSummary;
      * UsersSummary;
      * RecognizerWeekSummary;
      * UserTypeSummary.

      Verifique os schemas para observar os atributos.

paths:
    # security
    /login:
      post:
        summary: Acessar o sistema.
        operationId: login
        tags:
          - Security
        description: |-
          ## Login

          Devolve um token de acesso para requisições que é necessário autenticação no sistema.
        responses:
          '200':
            $ref: '#/components/responses/LoginSuccessResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '500':
            $ref: '#/components/responses/InternalServerError'
        requestBody:
          description: |-
            Solicitação foi finalizada com sucesso!

            No corpo da __resposta__ (response) está o token de acesso e o tempo de expiração em milisegundos.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputLogin'
    /request-renew-pass:
      post:
        summary: Solicitação de nova senha
        operationId: renewPassword
        tags:
          - Security
        description: |-
          ## Solicitação nova senha

          __Primeiro passo para pedido de nova senha.__


          Solicitação para pedido de nova senha, um e-mail será enviado para o e-mail cadastrado,
          solicitando confirmação nova senha. Caso o e-mail não for encontrado a Api silenciosamente
          ignora a solicitação, ou seja sempre retornara processo concluído com sucesso.
        parameters:
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
        requestBody:
          required: true
          description: |-
            Solicitação aceita, um e-mail será enviando com a nova senha.

            __OBS:__ o retorno sempre será 202 com resposa de sucesso.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputRenewPassword'
        responses:
          '202':
            $ref: '#/components/responses/RequestRenewPassResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '500':
            $ref: '#/components/responses/InternalServerError'
      get:
        summary: Confirmação de solicitação de nova senha
        operationId: renewPasswordConfirm
        tags:
          - Security
        description: |-
          ## Confirmação do pedido de nova senha

          __Segundo passo para pedido de nova senha.__

          Último passo para renovação de senha, uma vez confirmado o pedido de nova senha, a Api criará
          a senha e enviará para o e-email informado. Caso o link esteja expirado uma resposta de erro
          com Status Code 422 será retornada.

          __OBS:__ caso algum erro for encontrado exceto link expirado, como já mencionado,
          a Api silenciosamente tratará o erro e ocultará o erro, sendo assim não informará para o cliente,
          por motivos de seguraça.
        parameters:
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
          - in: query
            description: token para solicitação de nova senha.
            name: params
            schema:
              type: string
              example: YWFhYWE=
        responses:
          '202':
            $ref: '#/components/responses/ConfirmRenewPassResponse'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'

    # registry students
    /new-students/registry:
      post:
        summary: Registra um novo estudante no sistema
        tags:
          - Registry
        operationId: registerNewStudents
        description: >-
          ## Registro para estudantes

          Registro feito pelo próprio estudante, neste caso algumas regras devera ser observadas:
          * E-mail deve ser institucional, **@alunos.utfpr.edu.br
          * O aluno deve confirmar a posse do e-mail, clicando no link que será enviado no e-mail informado
          * O aluno deve enviar uma foto de avatar para seu perfil.
          * O aluno também deve enviar uma foto do documento do carro.

          Embora o aluno termine esses passos com sucesso, o acesso do aluno ainda deve ser liberado pelo
          administrador do sistema.
        parameters:
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
        requestBody:
          required: true
          description: Corpo da chama para cadastrar o usuário.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputRegistryStudent'
        responses:
          '201':
            $ref: '#/components/responses/UserRegistrySuccessResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '409':
            $ref: '#/components/responses/Conflict'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /activate-registry:
      get:
        summary: Ativação de conta
        tags:
          - Registry
        operationId: activateAccount
        description: |-
          ### Ativar conta

          Passo necessário para usuário que fez o cadastro ativar a conta.
        parameters:
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
          - in: query
            description: Parametros para solicitação de ativar conta.
            name: params
            schema:
              type: string
              example: YWFhYWE=
        responses:
          '202':
            $ref: '#/components/responses/ActiveAccountSuccessResponse'
          '404':
            $ref: '#/components/responses/NotFound'

    # Profile
    /profile/me:
      get:
        summary: Retornar o usuário dono do token
        description: |-
          ### Esta requisição necessita de um usuário autenticado no sistema.

          Uma vez autenticado no sistema, enviado uma requisição para login, este disponibiliza as
          informações do dono token.
        operationId: getUserOwnerToken
        tags:
          - Profile
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
        responses:
          '200':
            $ref: '#/components/responses/UserOwnerTokenResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/change-name:
      patch:
        summary: Altera o nome do recurso usuário
        operationId: changeName
        description: |-
          ### Solicitação para troca de nome

          Usuário poderá alterar seu nome quantas vezes quiser, desde que o nome não está já cadastrado.
        tags:
          - Profile
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
        requestBody:
          description: Corpo da chamad para alterar o nome do usuário
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputNameUser'
        responses:
          '200':
            $ref: '#/components/responses/UserAccessResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/include-new-car:
      patch:
        summary: Adiciona um novo recurso carro para usuário
        operationId: includeNewCar
        description: |-
          ### Incluir novo carro

          O usuário poderá adicionar mais de um carro, com limite de até 5 carros, os carros anteriores já incluídos
          continuaram com seus acessos normais, porém este novo carro incluído para receber o acesso, deverá
          ser enviado a foto do documento, e o Administrador do sistema deverá autorizar.
        tags:
          - Profile
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        requestBody:
          description: Corpo da chamada que contém as informações para incluir um carro.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputNewCar'
        responses:
          '201':
            $ref: '#/components/responses/IncludeNewCarResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/remove-car:
      delete:
        summary: Remove um recurso carro do usuário
        operationId: removeCar
        description: |-
          ### Remover Carro

          O usuário poderá remover o carro quando quiser, isto implica em retirar o carro da lista
          de carros ativos para acessar o estacionamento. Esta ação tem efeitos permanetes, porém os
          dados de acesso não será removidos. O usuário ainda verá as informações de acessos deste carro.
        tags:
          - Profile
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        requestBody:
          description: Corpo da chamada que contém a placa do carro que será removido.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputRemoveCar'
        responses:
          '204':
            description: Remoção concluida com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/change-password:
      post:
        summary: Faz uma solicitação de pedido para uma nova senha
        operationId: changePassword
        description: |-
          ### Alteração de senha

          O usuário poderá alterar sua senha quantas vezes quiser, desde que esteja autenticado no sistema Xenon
          Uma vez o processo seja concluido, um e-mail será enviado notificando a alteração da senha.

        tags:
          - Profile
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
        requestBody:
          required: true
          description: Corpo da solicitação para troca de senha
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputChangePassword'
        responses:
          '202':
            $ref: '#/components/responses/RefreshPassSuccessResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/disable-account:
      delete:
        summary: Desabilita a conta do usuário
        operationId: disableAccount
        description: |-
          ### Desativar conta

          O usuário poderá desativar sua conta quando quiser, neste caso ele perderá todo o acesso ao sistema
          * acessar a aplicação
          * acessar o estacionamento.

          Está ação será permanente, alguns dados do usuário será mantido na base de dados, são eles:
          * Dados de acessos;
          * Nome;
          * Email;
          * Tipo do usuário;
          * Papel.

          A lista de carro será removida completamente assim como os documentos adicionados, avatar.
        tags:
          - Profile
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        responses:
          '204':
            description: Conta desativada com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/avatar:
      post:
        summary: Avatar do usuário
        operationId: includeAvatar
        tags:
          - Profile
        description: |-
          ### Incluir Avatar

          O usuário poderá adicionar uma imagem que será utilizada em seu perfil é no reconhecimento.
          O arquivo aceitos será png e jpg (jpeg), e será convertido para png. O arquivo será público.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        requestBody:
          required: true
          description: Arquivo que será adicionado.
          content:
            multipart/form-data:
              schema:
                description: Arquivo de imagem que será utilizado no avatar
                type: object
                properties:
                  fileName:
                    type: string
                    format: binary

        responses:
          '200':
            $ref: '#/components/responses/UserOwnerTokenResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /profile/car/{id}/document:
      post:
        summary: Documento do carro usuário
        operationId: includeDocumentCar
        tags:
          - Profile
        description: |-
          ### Incluir documento do carro

          O usuário poderá adicionar um documento para o carro afim de ser avaliado pelo administrador
          do sistema.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            description: identificar único do carro.
            schema:
              type: integer
              format: int64
              example: 1
        requestBody:
          required: true
          description: Arquivo que será adicionado.
          content:
            multipart/form-data:
              schema:
                description: Arquivo pdf que será utilizado para avaliação do documento do carro.
                type: object
                properties:
                  fileName:
                    type: string
                    format: binary

        responses:
          '204':
            description: Documento enviado com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '404':
            $ref: '#/components/responses/NotFound'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'

    # User
    /users/all:
      get:
        summary: Retorna uma objeto Page de usuários
        operationId: getAllUsers
        tags:
          - User
        description: |-
          ### Solictação de recursos Usuários

          Uma objeto de representação de página contento uma lista finita de Usuários será retornado
          nesta solicitação, a quantidade elementos e qual página deve ser retornada será informada
          no query da url, caso as informações não forem informadas, a Api retornara com os valores
          padrões:

          * quantidade de elementos (size) 5
          * página (page) 0, indicando que será a primeira página
          * ordernada por dada de criação (sorted) createdAt
          * ordenada do primeiro para o ultimo (sorteDirection) [DESC]

          Regras da solicitação:
          * Usuário deve estar autenticado no sistema
          * Usuário deve ter o papel de __administrador__ [ROLE_ADMIN]

        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: query
            name: size
            description: |-
              Quantidade de elementos exibidos por página, padrão 5 valor máximo 100, será retornado erro 400
            schema:
              maximum: 100
              default: 5
              type: integer
          - in: query
            name: page
            description: número da página, lista inicia por 0, ou seja 0 retornara a primeira página
            schema:
              type: integer
              default: 0
          - in: query
            name: sorted
            description: |-
              Valor padrão será `created` (data de criação), porém se informado e não corresponder a lista abaixo
              o valor `created`  será utilizado.

              propriedade que se deseja orderna, valores disponívels:
              * name
              * type
              * email
              * created
            schema:
              type: string
              default: name
          - in: query
            name: direction
            description: direção da ordenação
            schema:
              type: string
              default: desc
          - in: query
            name: nameOrEmail
            description: filtra os elementos por nome ou e-mail
            schema:
              type: string
          - in: query
            name: type
            description: |-
              filtra os elementos por tipo de usuário.

              Valores disponíveis:
              * SERVICE
              * STUDENTS
              * SPEAKER

              Caso preenchendo e o valor informado não corresponder ao dado anteriormente
              o será utilizado como padrão ``SERVICE``.
            schema:
              type: string
        responses:
          '200':
            $ref: '#/components/responses/UserPageResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users:
      get:
        summary: Retorna um recurso Usuário.
        description: |-
          ### Solicitação para receber um recurso usuário.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de __administrador__ [ROLE_ADMIN]

          Com base no id informado no path da requisição, um recurso usuário será retornado.
        operationId: getUserById
        tags:
          - User
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
          - in: path
            name: id
            schema:
              type: integer
              format: int64
              example: 1
              description: id do recurso a ser solicitado
        responses:
          '200':
            $ref: '#/components/responses/UserGetIdResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
      post:
        summary: Cria um recurso Usuário.
        description: |-
          ### Solicitação para criar um recurso usuário.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de __administrador__ [ROLE_ADMIN]

          Criará um recurso usuário que representa uma abstração de uma pessoa que utiliza o sistema
          seja para solicitar acesso ao estacionamento, administrar o sistema Xenon ou operar.
        operationId: createNewUser
        tags:
          - User
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        requestBody:
          description: Corpo da chamada que contém as informações para criar um recurso usuário.
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputUser'
        responses:
          '201':
            $ref: '#/components/responses/UserCreatedResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '409':
            $ref: '#/components/responses/Conflict'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
      put:
        summary: Atualiza um recurso Usuário.
        description: |-
          ### Solicitação para atualizar um recurso usuário.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          O administrador poderá atualizar quase todos os dados do usuário, apenas a lista dos carros
          cadastrados o usuário dono das informações pode manipular.
        operationId: updateUser
        tags:
          - User
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            description: id do recurso usuário
            schema:
              type: integer
              format: int64
              example: 1
        requestBody:
          description: Corpo da chamada que contém as informações para atualizar um recurso usuário.
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputUpdateUser'
        responses:
          '200':
            $ref: '#/components/responses/UserCreatedResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '409':
            $ref: '#/components/responses/Conflict'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
      delete:
        summary: Desativa a conta do usuário
        description: |-
          ### Solicitação para desativar conta do usuário

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Uma conta desativa implica que o usuário perdera o acesso ao sistema, não só como também, será
          desabilitado seu acesso ao estacionamento.

          Está ação será permanente, alguns dados do usuário será mantido na base de dados, são eles:
          * Dados de acessos;
          * Nome;
          * Email;
          * Tipo do usuário;
          * Papel.
          * Motivo da remoção do usuário.

          A lista de carro será removida completamente assim como os documentos adicionados, avatar.
        tags:
          - User
        operationId: disabledUserAccount
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
        requestBody:
          description: Corpo da chamada para desativar a conta do usuário
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputAccessUser'
        responses:
          '200':
            $ref: '#/components/responses/UserAccessResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/disabled/access:
      patch:
        summary: Remove autorização de acesso do usuário.
        tags:
          - User
        operationId: disableUserAccess
        description: |-
          ### Solicitação para remover autorização do usuário

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Uma usuário sem autorização de acesso implica que o usuário terá seu acesso ao estacionamento
          bloqueado.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
        requestBody:
          description: Corpo da chamada para remover autorização de acesso do usuário
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputAccessUser'
        responses:
          '200':
            $ref: '#/components/responses/UserAccessResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/enabled/access:
      patch:
        summary: Autoriza acesso do usuário.
        tags:
          - User
        operationId: enabledUserAccess
        description: |-
          ### Solicitação para autorizar acesso do usuário

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Adiciona autorização de acesso para o usuário.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
        requestBody:
          description: Corpo da chamada para autorizar o acesso do usuário
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputAccessUser'
        responses:
          '200':
            $ref: '#/components/responses/UserAccessResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/{id}/prepare-download/document:
      get:
        summary: Prepara download de documento.
        tags:
          - User
        operationId: downloadDocument
        description: |-
          ### Solicitação para download do documento do carro

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Retornar uma uri para baixar o arquivo que o usuário fez o upload do documento do carro
          esta uri que será retornada tera um vida útil pre determinado, que será 5 minutos após a solicitação
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            schema:
              type: integer
              format: int64
              example: 1
        responses:
          '200':
            $ref: '#/components/responses/DocumentUriResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/{id}/cars:
      get:
        summary: Lista de carros do usuário.
        tags:
          - User
        operationId: getCars
        description: |-
          ### Solicitação de carro do usuário

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Retorna uma lista de 0 até 5 elementos de carros cadastrados do usuário.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            schema:
              type: integer
              format: int64
              example: 1
        responses:
          '200':
            $ref: '#/components/responses/CarResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/car/{id}/approved:
      patch:
        summary: Aprova documento do carro.
        tags:
          - User
        operationId: documentApproved
        description: |-
          ### Solicitação aprovar o documento do carro

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Endpoint para notificar que a documentação do carro disponibilizada pelo usuário está em conformidade.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            schema:
              type: integer
              format: int64
              example: 1
        responses:
          '204':
            description: Documento aprovado com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/car/{id}/reproved:
      patch:
        summary: Reprova o documento do carro disponíbilizado pelo usuário
        tags:
          - User
        operationId: documentReproved
        description: |-
          ### Solicitação reprovar o documento do carro

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema
          * Ser autorizada com papel de administrador. [ROLE_ADMIN]

          Endpoint para notificar que a documentação do carro disponibilizada pelo usuário foi reprovada.
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: header
            name: Accept-Language
            schema:
              type: string
              example: |-
                Accept-Language: pt-BR
            description: Idioma da resposta para mensagens de texto.
          - in: path
            name: id
            schema:
              type: integer
              format: int64
              example: 1
        responses:
          '204':
            description: Documento reprovado com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /users/car/{id}/access:
      get:
        summary: Retorna uma página de acessos de um usuário
        operationId: getAllAccess
        tags:
          - User
        description: |-
          ### Solicitação para recuperar uma página de acessos de um usuário.

          A Api retornar uma página com a seguinte orientação:
          Será ordenado pelo acesso mais ao mais velho, ordernação descendente.

          Os paramentros para consulta será:
          * quantidade de elementos (size) 5
          * página (page) 0, indicando que será a primeira página

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __operador__ [ROLE_OPERATOR]

          Retornara um página de acessos do usuário.
        parameters:
          - in: path
            name: id
            description: identificador o usuário que deseja recupera os acessos.
            schema:
              type: integer
              format: int64
          - in: query
            name: size
            description: |-
              Quantidade de elementos exibidos por página, padrão 5 valor máximo 100, será retornado erro 400
            schema:
              maximum: 100
              default: 5
              type: integer
          - in: query
            name: page
            description: número da página, lista inicia por 0, ou seja 0 retornara a primeira página
            schema:
              type: integer
              default: 0
        responses:
          '200':
            $ref: '#/components/responses/UserAccessCarResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'

            #    /user/car/{id}/block-access:
    /users/cars/waiting-decision:
      get:
        summary: Retorna uma página carros aguardando decisão de aprovar ou não
        operationId: getAllCarsWaitingDecision
        tags:
          - User
        description: |-
          ### Solicitação para recuperar uma página cadastros de carros aguardando decisão.

          A Api retornar uma página com a seguinte orientação:
          Será ordenado pelo cadastros mais velho, ordernação descendente.

          Os paramentros para consulta será:
          * quantidade de elementos (size) 5
          * página (page) 0, indicando que será a primeira página

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]
        parameters:
          - in: query
            name: size
            description: |-
              Quantidade de elementos exibidos por página, padrão 5 valor máximo 100, será retornado erro 400
            schema:
              maximum: 100
              default: 5
              type: integer
          - in: query
            name: page
            description: número da página, lista inicia por 0, ou seja 0 retornara a primeira página
            schema:
              type: integer
              default: 0
        responses:
          '200':
            $ref: '#/components/responses/PageCarWaitingDecisionResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'

    # workstation
    /workstations:
      get:
        summary: Retonar uma lista de todas as estações de trabalho cadastradas.
        description: |-
          ### Solicitação para recuperar todas as estações de trabalho registradas.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __operador__ [ROLE_OPERATOR]

          Retornara todas as estações de trabalho cadastrada no Xenon.
        operationId: getAll
        tags:
          - Workstation
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        responses:
          '200':
            $ref: '#/components/responses/WorkstationsAllResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'
      post:
        summary: Cria um recurso Workstation
        description: |-
          ### Solicitação para criar uma estação de trabalho.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Retornara a estações de trabalho criada Xenon.
        operationId: createStation
        tags:
          - Workstation
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
        requestBody:
          required: true
          description: Corpo da chamada para criar uma estação de trabalho.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputWorkstation'
        responses:
          '201':
            $ref: '#/components/responses/WorkstationCreatedResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '409':
            $ref: '#/components/responses/Conflict'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
      put:
        summary: Atualiza os dados de um recurso Workstation
        description: |-
          ### Solicitação para atualizar uma estação de trabalho.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Retornara a estações de trabalho atualizada Xenon.
        operationId: updateStation
        tags:
          - Workstation
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            schema:
              description: identificador da estação da qual será autualizada.
              type: integer
              format: int64
              example: 1
        requestBody:
          required: true
          description: Corpo da chamada para autualizar uma estação de trabalho.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputWorkstation'
        responses:
          '200':
            $ref: '#/components/responses/WorkstationUpdatedResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '409':
            $ref: '#/components/responses/Conflict'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
      delete:
        summary: Remove um recurso Workstation
        description: |-
          ### Solicitação para remover uma estação de trabalho.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Esta solicitação não retorna corpo, esta solicitação removera uma estação de trabalho, porém
          os dados de reconhecimentos serão mantidos.
        operationId: deleteStation
        tags:
          - Workstation
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            schema:
              description: identificador da estação, da qual será removida
              type: integer
              format: int64
              example: 1
        responses:
          '204':
            description: Estação de trabalho removida com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '422':
            $ref: '#/components/responses/UnprocessableEntity'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /workstations/{id}:
      get:
        summary: Retornar uma Estação de trabalho especifica.
        operationId: getById
        tags:
          - Workstation
        description: |-
          ### Solicitação para recuperar uma estações de trabalho especifica.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __operador__ [ROLE_OPERATOR]

          Retornara uma estações de trabalho cadastrada no Xenon, que é igual ao Id noficicado na requisição.
        parameters:
          - in: path
            name: id
            description: identificador único da estação de trabalho.
            schema:
              type: integer
              format: int64
        responses:
          '200':
            $ref: '#/components/responses/WorkstationGetterResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /workstations/{workstationId}/approved-access/recognizer/{recognizerId}:
      post:
        summary: Envia aprovação para acesso.
        operationId: approvedAccess
        tags:
          - Workstation
        description: |-
          ### Solicitação aprovar o acesso ao estacionamento.

          Caso a estação de trabalho esteja configurada para receber o sinal de abertura de cancela
          uma requisição será enviada para a estação de trabalho.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __operador__ [ROLE_OPERATOR]

          Retornara uma estações de trabalho cadastrada no Xenon, que é igual ao Id noficicado na requisição.
        parameters:
          - in: path
            name: workstationId
            description: identificador único da estação de trabalho.
            schema:
              type: integer
              format: int64
          - in: path
            name: recognizerId
            description: identificador único do reconhecimento.
            schema:
              type: integer
              format: int64
        responses:
          '204':
            description: Envio de aprovação foi enviada com sucesso.
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '404':
            $ref: '#/components/responses/NotFound'
          '500':
            $ref: '#/components/responses/InternalServerError'

          #recogizer

    #Recognizers
    /receive-recognizer:
      post:
        summary: Envia um novo reconhecimento.
        description: |-
          ### Solicitação para recebe um novo Reconhecimento.

          Regras para solicitação:
          * Deve incluir a key que foi gerada para o dispositivo, na estação de trabalho
          * Deve ser válida.

          Retorno da solicitação é sem conteúdo


          OBS: __Esta solicitação tratará os erros silenciosamente, em outras palavras não retornara erro,
          este erro será salvo para ser observado posteriormente caso necessário __consulte a seção de
          `receive-regonizer-error` para mais informações.__
        tags:
          - Recognizer
        operationId: receiveRecognizer
        parameters:
          - in: path
            name: key
            required: true
            description: Chave de autenticação do dispositivo.
            schema:
              type: string
              example: auuytxbvcvnniioadfhhjaewv
        requestBody:
          required: true
          description: Corpo da chama para receber novo reconhecimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InputRecognizer'
        responses:
          '204':
            description: Reconhecimento recebido.
    /all-recognizer:
      get:
        summary: Retorna todos os reconhecimentos.
        operationId: getAllRecognizers
        tags:
          - Recognizer
        description: |-
          ### Solicitação para receber todos os reconhecimentos.

          Uma objeto de representação de página contento uma lista finita de Reconhecimentos,
          recebidos pelo Xenon será retornado
          nesta solicitação, a quantidade elementos e qual página deve ser retornada será informada
          no query da url, caso as informações não forem informadas, a Api retornara com os valores
          padrões:

          * quantidade de elementos (size) 5
          * página (page) 0, indicando que será a primeira página
          * ordernada por dada de criação (sorted) createdAt
          * ordenada do primeiro para o ultimo (sorteDirection) [DESC]

          Regras da solicitação:
          * Usuário deve estar autenticado no sistema
          * Usuário deve ter o papel de __administrador__ [ROLE_ADMIN]
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: query
            name: size
            description: |-
              Quantidade de elementos exibidos por página, padrão 5 valor máximo 100, será retornado erro 400
            schema:
              maximum: 100
              default: 5
              type: integer
          - in: query
            name: page
            description: número da página, lista inicia por 0, ou seja 0 retornara a primeira página
            schema:
              type: integer
              default: 0
          - in: query
            name: sorted
            description: |-
              Valor padrão será `created` (data de criação), porém se informado e não corresponder a lista abaixo
              o valor `created`  será utilizado.

              propriedade que se deseja orderna, valores disponívels:
              * driverName
              * origin
              * created
            schema:
              type: string
              default: created
          - in: query
            name: direction
            description: direção da ordenação
            schema:
              type: string
              default: desc
          - in: query
            name: driverName
            example: Fulano de tal
            description: |-
              filtra os elementos pelo nome do motorista vinculado, deve ser mencionado que uma vez
              preenchido este filtro, reconhecimentos que Xenon não encontrou usuário vinculado, __NÃO SERÁ RETORNADO__
              nesta consulta.
            schema:
              type: string
          - in: query
            name: onlyError
            description: |-
              Filtro para define se a resposta tera todos ou só com error

              Por padrão o valor deste filtro é indefinido (retornara todos os reconhecimentos)
              `true` retornara apenas os reconhecimentos com error
              `false` retornara todos os reconhecimentos.
            schema:
              type: boolean
        responses:
          '200':
            $ref: '#/components/responses/RecognizerPageResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /error-recognizer:
      get:
        summary: Error gerado quando um reconhecimento foi recebido.
        operationId: errorRecognizer
        tags:
          - Recognizer
        description: |-
          ### Solicitação para receber erro no reconhecimentos.

           Uma objeto de representação o erro gerado quando um processo de reconhecimentos fo gerado,

           Regras da solicitação:
           * Usuário deve estar autenticado no sistema
           * Usuário deve ter o papel de __administrador__ [ROLE_ADMIN]
        parameters:
          - in: header
            name: Authorization
            schema:
              type: string
              example: |-
                Authorization: Bearer <token>
            description: Token de acesso do usuário.
          - in: path
            name: id
            schema:
              type: integer
              format: int64
              example: 10
              description: Identificado do erro.
        responses:
          '200':
            $ref: '#/components/responses/ErrorRecognizerResponse'
          '400':
            $ref: '#/components/responses/BadRequest'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'


    #System
    /system/workstations-and-recognizer:
      get:
        summary: Retornar o sumário de estações de trabalho e a quantidade de reconhecimentos.
        operationId: workstationAndRecognizer
        tags:
          - StateSystem
        description: |-
          ### Solicitação para recuperar o sumário das estações de trabalho.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Retornara um sumário das estações de trabalho.
        responses:
          '200':
            $ref: '#/components/responses/WorkstationSummaryResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /system/registry-cars:
      get:
        summary: Retorna o sumário de carros cadastros no sistema separado por estados.
        operationId: registryCars
        tags:
          - StateSystem
        description: |-
          ### Solicitação para recuperar o sumário dos carros cadastrados separado por estado.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Retornara um sumário dos carros.
        responses:
          '200':
            $ref: '#/components/responses/UserCarsSummaryResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /system/recognizers-week:
      get:
        summary: Retorna o sumário dos reconhecimentos de uma semana.
        operationId: recognizserWeek
        tags:
          - StateSystem
        description: |-
          ### Solicitação para recuperar o sumário dos reconhecimentos retroativo de uma semana.

          Exemplo, se no dia da consulta foi segunda-feira, o retorno será da segunda-feira da semana
          anterior, até a data do dia da consulta.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Retornara um sumário dos reconhecimentos.
        responses:
          '200':
            $ref: '#/components/responses/RecognizerSummaryResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'
    /system/registry-users:
      get:
        summary: Retornar o sumário da quantiade de usuários cadastrados divido por tipos.
        operationId: registryUser
        tags:
          - StateSystem
        description: |-
          ### Solicitação para recuperar o sumário dos cadastro de usuários.

          Regras para solicitação:
          * Usuário deve estar autenticado no sistema;
          * Ser autorizado com papel de __administrador__ [ROLE_ADMIN]

          Retornara um sumário dos usuários cadastrados por tipos.
        responses:
          '200':
            $ref: '#/components/responses/UserRegistrySummaryResponse'
          '401':
            $ref: '#/components/responses/Unauthorized'
          '403':
            $ref: '#/components/responses/Forbidden'
          '500':
            $ref: '#/components/responses/InternalServerError'


components:
  schemas:
    # Dtos
    Token:
      properties:
        data:
          type: object
          description: objeto que representa um token de acesso
          properties:
            token:
              type: string
              description: token de acesso
              example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImF5bGFuQGJvc2Nhcmluby5jb20iLCJwYXNzd29yZCI6InlhMGdzcWh5NHd6dnV2YjQifQ.yN_8-Mge9mFgsnYHnPEh_ZzNP7YKvSbQ3Alug9HMCsM
            expiration:
              type: integer
              format: int64
              description: Tempos em segundos da expiração do token
              example: 3600
    ProcessResult:
      type: object
      properties:
        result:
          description: resultado do processo.
          type: string
          example: Prcoesso concluído
    Role:
      type: object
      properties:
        id:
          description: Identificador único do registro do usuário.
          type: integer
          format: int64
          example: 1
        name:
          type: string
          description: Nome do papel
          example: ROLE_DRIVER
        description:
          type: string
          description: Descrição do papel
          example: Perfil Motorista
    User:
      type: object
      properties:
        id:
          description: Identificador único do registro do usuário.
          type: integer
          format: int64
          example: 1
        email:
          description: e-mail da credencial do usuário, como ela que ele utilizara para acessar o sistema.
          type: string
          example: aluno@alunos.utfpr.edu.br
          pattern: ^[A-Za-z0-9._%+-]+@alunos.utfpr.edu.br$
        name:
          description: nome do aluno
          type: string
          minimum: 10
          maximum: 255
          example: Fulano de Tal
        type:
          type: string
          enum:
            - STUDENTS
            - SPEAKER
            - SERVICE
          description: |-
            * `STUDENTS` - Tipo de usuário estudante.
            * `SPEAKER`  - Tipo de usuário palestrante.
            * `SERVICE`  - Tipo de usuário servidor.
          example: STUDENTS
        avatar:
          type: string
          example: "https://avatar-uri.com.br"
          description: Uri do avatar do usuário
        cars:
          type: array
          items:
            $ref: '#/components/schemas/Car'
        roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
        authorisedAccess:
          type: boolean
          description: define se usuário tem acesso ao estacionamento, liberado
          example: true
        enabled:
          type: boolean
          description: define se a conta do usuário esta ativa ou não
          example: true
        disableReason:
          type: string
          description: |-
            Caso a conta do usuário está desativa, este campo será preenchido com o motivo da desativação
            da conta.
          example: Usuário cancelou a conta.
    Car:
      type: object
      properties:
        id:
          description: identificador único do carro
          type: integer
          format: int64
          example: 10
        modelCar:
          description: Modelo do carro, este campo é opcional.
          type: string
          maximum: 15
          minimum: 3
          example: Gol 1.0
        plateCar:
          description: Placa do carro, este campo é opcional, Sistema já suporta placa com formato mercosul.
          type: string
          pattern: "[aA-zZ]{3}[0-9][0-9aA-zZ][0-9]{2}"
        lastAcess:
          type: string
          format: date-time
          example: "2021-01-30T08:30:00Z"
          description: Data de ultimo acesso
        numberAccess:
          type: integer
          example: 100
          description: Quantidade de acessos autorizado do carro
        authorisedAccess:
          type: boolean
          description: Define se o carro tem ou acesso ao estacionamento.
        status:
          type: string
          description: Define o status do cadastro do carro.
        reasonLock:
          type: string
          description: Define o motivo do bloqueio ou recusa do cadastro do carro.
        document:
          type: string
          description: Identificador do documento do carro que o usuário enviou.
    PageBase:
      properties:
        size:
          type: integer
          description: quantidade elementos
          example: 5
        page:
          type: integer
          description: número da página
          example: 0
        sorted:
          type: string
          description: campo do recurso que foi ordernado a página
          example: field
        direction:
          type: string
          example: asc
          description: direção da ordenação Ascendente ou Descendente
        totalElements:
          type: integer
          format: int64
          description: total de elementos encontrados.
          example: 500
        totalPage:
          type: integer
          description: total de páginas possíveis, com base no tamanho de elementos na página e o total de elementos.
          example: 10
    PageUser:
      allOf:
        - $ref: '#/components/schemas/PageBase'
        - properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/User'
    Workstation:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: identificar
          example: 1
        name:
          type: string
          description: Nome da estação de trabalha
          example: Portão 01
        ip:
          type: string
          description: Ip do dispositivo a qual a estação de trabalho está vinculada
          example: 00:00:00:00
        mode:
          type: string
          enum:
            - MANUAL
            - AUTOMATIC
            - NONE
          description: Modo de operação da estação de trabalho.
          example: AUTOMATIC
        port:
          type: integer
          description: porta para acesso do dispositivo
          example: 9090
        key:
          type: string
          description: Chave de comunicação para autorizar o dispositivo.
          example: HNjDjSdws5
    Plates:
      type: object
      description: Dados do reconhecimento
      properties:
        plate:
          type: string
          description: Placa reconhecida
          example: ABC-1234
        confidence:
          type: number
          format: float
          description: Valor de confidencialidade do reconhecimento
          example: 89.01812
    Recognizer:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: Identificador do reconhecimento.
          example: 1
        originIp:
          type: string
          description: Ip do dispositivo que originou o reconhecimento
          example: 192.168.000.001
        epochTime:
          type: string
          format: date-time
          description: Momento no tempo que o reconhecimento foi gerado.
          example: "2021-01-30T08:30:00Z"
        plate:
          type: string
          description: Placa reconhecida
          example: ABC-1234
        confidence:
          type: number
          format: float
          maxLength: 5
          example: 89.01001
        hasError:
          type: boolean
          description: Caso um erro de processo foi gerado
          example: false
        errorDetails:
          type: integer
          format: int64
          description: |-
            Caso um erro de processamento foi ocasionado no momento do reconhecimento, este campo será preenchido
            indicando o id do error. Para consulta posterior.
        accessGranted:
          type: boolean
          description: |-
            Resultado do reconhecimento:
              **TRUE** placa do carro foi identificado com sucesso à um usuário com acesso liberado
              **FALSE** placa do carro foi identificado com sucesso porém não ouve usuário vinculado a placa ou o usuário não tem acesso liberado.

            Para o segundo caso, deve-se verificar se os campos __driverName__ foi preenchida, caso sim
            a placa foi vinculada a um usuário, entretando ele está com acesso removido.
          example: true
        driverName:
          type: string
          description: Nome do usuário vinculado a placa reconhecida
          example: Fulano de Tal
    PageRecognizer:
      allOf:
        - $ref: '#/components/schemas/PageBase'
        - properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Recognizer'
    DocumentUri:
      type: object
      properties:
        uri:
          type: string
          example: "http:\\document.pdf"
        ttl:
          type: integer
          example: 3600
    UserCarAccess:
      type: object
      properties:
        carPlate:
          type: string
          description: Placa do carro
          example: ABC-0001
        epochTime:
          type: string
          format: date-time
          description: Data e hora do acesso
          example: "2021-01-30T08:30:00Z"
        confidence:
          type: number
          format: float
          description: confiabilidade no reconhecimento.
          example: 89.9
        grandAccess:
          type: boolean
          description: Define se o acesso foi ou não concebido.
          example: false
    PageUserCarAccess:
      allOf:
        - $ref: '#/components/schemas/PageBase'
        - properties:
            amountCars:
              type: integer
              description: quantidade de carros cadastrados
              example: 5
            items:
              type: array
              items:
                $ref: '#/components/schemas/UserCarAccess'
    WorkstationSummary:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: Identificador único da estação de trabalho
          example: 1
        workstationName:
          type: string
          description: Nome da Estação de Trabalho
          example: Portão 01
        amountAccess:
          type: integer
          description: Quantidade de reconhecimentos
    UserCarsSummary:
      type: object
      properties:
        waiting:
          type: integer
          format: int64
          description: Quantidade de carros aguardando aprovação.
          example: 12
        approved:
          type: integer
          format: int64
          description: Quantidade de carros aprovados
          example: 20
        reproved:
          type: integer
          format: int64
          description: Quantidade de carros reprovados.
          example: 40
        block:
          type: integer
          format: int64
          description: Quantidade de carros bloqueados.
          example: 50
    RecognizerSummary:
      type: object
      properties:
        seventhDayBefore:
          type: integer
          description: quantidade de reconhecimentos do sétimo dia anterior.
          example: 10
        sixthDayBefore:
          type: integer
          description: quantidade de reconhecimentos do sexto dia anterior.
          example: 10
        fifthDayBefore:
          type: integer
          description: quantidade de reconhecimentos do quinto dia anterior.
          example: 10
        fourthDayBefore:
          type: integer
          description: quantidade de reconhecimentos do quanrto dia anterior.
          example: 10
        thirdhDayBefore:
          type: integer
          description: quantidade de reconhecimentos do terceiro dia anterior.
          example: 10
        secondDayBefore:
          type: integer
          description: quantidade de reconhecimentos do segundo dia anterior.
          example: 10
        firstDayBefore:
          type: integer
          description: quantidade de reconhecimentos do último dia anterior.
          example: 10
        now:
          type: integer
          description: quantidade de reconhecimentos hoje.
          example: 10
    UsersRegistrySummary:
      type: object
      properties:
        services:
          type: integer
          format: int64
          description: Quantidade de usuários do tipo servidor.
          example: 1203
        speakers:
          type: integer
          format: int64
          description: Quantidade de usuários do tipo palestrante.
          example: 50
        students:
          type: integer
          format: int64
          description: Quantidade de usuários do tipo estudante.
          example: 61000
    PageCarWaitingDecision:
      allOf:
        - $ref: '#/components/schemas/PageBase'
        - properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Car'



        #Inputs
    InputLogin:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          description: E-mail que foi cadastrado para o usuário.
          example: email@email.com
        password:
          type: string
          description: Senha que foi cadastrada para o usuário.
          example: abc1234
    InputRenewPassword:
      required:
        - email
      properties:
        email:
          description: e-mail para ser enviado a nova senha.
          type: string
          example: email@email.com.br
          pattern: ^(?=.{1,64}@)[A-Za-z0-9_-]+(\.[A-Za-z0-9_-]+)*@[^-][A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,})$
          minimum: 5
          maximum: 255
          nullable: false
    InputRegistryStudent:
      required:
        - email
        - name
        - password
        - confirmPassword
      properties:
        email:
          description: e-mail da credencial do usuário, como ela que ele utilizara para acessar o sistema.
          type: string
          example: aluno@alunos.utfpr.edu.br
          pattern: ^[A-Za-z0-9._%+-]+@alunos.utfpr.edu.br$
          nullable: false
          maxLength: 255
        name:
          description: nome do aluno
          type: string
          minimum: 10
          maximum: 255
          example: Fulano de Tal
          nullable: false
          minLength: 5
          maxLength: 255
        password:
          description: Senha da credencial do usuário
          type: string
          nullable: false
          minimum: 5
          maximum: 8
        confirmPassword:
          description: Mesma senha informada no campo senha, para confirmação.
          type: string
          minimum: 5
          maximum: 8
          nullable: false
        modelCar:
          description: Modelo do carro, este campo é opcional.
          type: string
          maximum: 15
          minimum: 3
          example: Gol 1.0
          nullable: false
        plateCar:
          description: Placa do carro, este campo é opcional, Sistema já suporta placa com formato mercosul.
          type: string
          pattern: "^[a-zA-Z]{3}-?[0-9][a-zA-Z][0-9]{2}$|^[a-zA-Z]{3}-?[0-9]{4}$"
          nullable: false
          minLength: 7
          maxLength: 8
    InputNameUser:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: nome do usuário a ser alterado
          example: Fulano de tal
          nullable: false
          minLength: 5
          maxLength: 255
    InputNewCar:
      type: object
      required:
        - model
        - plate
      properties:
        model:
          type: string
          description: Modelo do carro
          example: Gol 1.0
        plate:
          type: string
          description: placa do carro, placas no formato mercosu são aceitas
          pattern: "^[a-zA-Z]{3}-?[0-9][a-zA-Z][0-9]{2}$|^[a-zA-Z]{3}-?[0-9]{4}$"
          example: ABC-1A34
          minLength: 7
          maxLength: 8
          nullable: false
    InputChangePassword:
      type: object
      required:
        - actualPassword
        - password
        - confirmPassword
      properties:
        actualPassword:
          type: string
          description: Senha atual, utilizada para acessar o sistema Xenon
          example: 12345678
          minLength: 8
          maxLength: 16
          nullable: false
        password:
          type: string
          description: Nova senha
          example: 87654321
          minimum: 8
          maximum: 16
          nullable: false
        confirmPassword:
          type: string
          description: Confirmação da senha.
          example: 87654321
          minLength: 8
          maxLength: 16
          nullable: false
    InputRemoveCar:
      type: object
      required:
        - plate
      properties:
        plate:
          type: string
          description: placa do carro que será removido
          pattern: "^[a-zA-Z]{3}-?[0-9][a-zA-Z][0-9]{2}$|^[a-zA-Z]{3}-?[0-9]{4}$"
          example: ABC-1A34
          minLength: 7
          maxLength: 8
          nullable: false
    InputUser:
      required:
        - email
        - name
        - typeUser
        - roles
      properties:
        email:
          description: e-mail da credencial do usuário, como ela que ele utilizara para acessar o sistema.
          example: email@email.com.br
          type: string
          pattern: ^(?=.{1,64}@)[A-Za-z0-9_-]+(\.[A-Za-z0-9_-]+)*@[^-][A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,})$
          nullable: false
          minLength: 5
          maxLength: 255
        name:
          description: nome do usuário
          example: Fulano de Tal
          type: string
          minimum: 10
          maximum: 255
          nullable: false
        typeUser:
          type: string
          example: SERVICE
          nullable: false
          enum:
            - STUDENTS
            - SPEAKER
            - SERVICE
          description: |-
            * `STUDENTS` - Tipo de usuário estudante.
            * `SPEAKER`  - Tipo de usuário palestrante.
            * `SERVICE`  - Tipo de usuário servidor.
        roles:
          type: array
          items:
            type: integer
            format: int64
          maxItems: 3
          minItems: 1
          description: papeis do usuário
          example: [1,2,3]
          uniqueItems: true
        enabled:
          type: boolean
          description: define se a conta do usuário está ativa ou não
          example: true
        authorisedAccess:
          type: boolean
          description: define o acesso do usuário ao estacionamento
          example: true
        modelCar:
          type: string
          description: Modelo do carro
          example: Gol 1.0
          minLength: 5
          maxLength: 255
          nullable: true
        plateCar:
          type: string
          description: placa do carro, placas no formato mercosu são aceitas
          pattern: "^[a-zA-Z]{3}-?[0-9][a-zA-Z][0-9]{2}$|^[a-zA-Z]{3}-?[0-9]{4}$"
          example: ABC-1A34
          minLength: 7
          maxLength: 8
          nullable: true
    InputUpdateUser:
      required:
        - email
        - name
        - typeUser
        - roles
      properties:
        email:
          description: e-mail da credencial do usuário, como ela que ele utilizara para acessar o sistema.
          example: email@email.com.br
          type: string
          pattern: ^(?=.{1,64}@)[A-Za-z0-9_-]+(\.[A-Za-z0-9_-]+)*@[^-][A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,})$
          nullable: false
          minLength: 5
          minimum: 255
        name:
          description: nome do usuário
          example: Fulano de Tal
          type: string
          minimum: 10
          maximum: 255
          nullable: false
        typeUser:
          type: string
          example: SERVICE
          nullable: false
          enum:
            - STUDENTS
            - SPEAKER
            - SERVICE
          description: |-
            * `STUDENTS` - Tipo de usuário estudante.
            * `SPEAKER`  - Tipo de usuário palestrante.
            * `SERVICE`  - Tipo de usuário servidor.
        roles:
          type: array
          items:
            type: integer
            format: int64
          maxItems: 3
          minItems: 1
          description: papeis do usuário
          example: [ 1,2,3 ]
          uniqueItems: true
        enabled:
          type: boolean
          description: define se a conta do usuário está ativa ou não
          example: true
        authorisedAccess:
          type: boolean
          description: define o acesso do usuário ao estacionamento
          example: true
        disableReason:
          type: string
          description: Motivo para desativar conta do usuário
          example: Usuário não faz parte da instituição.
    InputAccessUser:
      type: object
      required:
        - userId
        - reason
      properties:
        userId:
          type: integer
          format: int64
          description: Identificador do usuário
          example: 1
        reason:
          type: string
          description: motivo da ação
          example: motivo da ação que originou.
          nullable: false
          minLength: 5
          maxLength: 255
    InputWorkstation:
      type: object
      required:
        - name
        - mode
        - ip
        - port
      properties:
        ip:
          type: string
          pattern: ([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4}|(\d{1,3}\.){3}\d{1,3}
          description: ip que será vinculado ao dispositivo, IPV6 está disponível.
          example: 192.168.1.1
          nullable: false
          maxLength: 50
        port:
          type: integer
          description: porta de acesso do dispostivo.
          example: 9090
          nullable: false
        name:
          type: string
          description: Nome da estação de trabalho
          maximum: 50
          minimum: 5
          example: Portão 01
          nullable: false
        mode:
          type: string
          enum:
            - NONE
            - AUTOMATIC
            - MANUAL
          description: Modo de operação da estação de trabalho.
          example: MANUAL
          nullable: false
    InputRecognizer:
      type: object
      properties:
        recognizers:
          type: array
          description: Resultados do reconhecimento.
          items:
            $ref: '#/components/schemas/Plates'

    # erros
    ErrorBase:
      type: object
      properties:
        statusCode:
          type: integer
          example: 0
          description: Code de status http
        message:
          type: string
          example: Um erro ocorreu.
          description: Mensagem da ocorrencia do erro.
        path:
          type: string
          example: /path
          description: uri da ocorrencia do erro
    Error:
      allOf:
        - type: object
        - $ref: '#/components/schemas/ErrorBase'
        - properties:
            details:
              type: array
              items:
                $ref: '#/components/schemas/ErrorDetails'
    ErrorDetails:
      type: object
      properties:
        field:
          type: string
          example: type.field
          description: nome do campo que contém um erro
        descriptionError:
          type: string
          example: Campo inválido
          description: descreve o erro o erro encontrado no campo.
    ErrorRecognizer:
      type: object
      properties:
        errorMessage:
          type: string
          description: Message da causa do error.
          example: Um erro aconteceu.
        originIp:
          type: string
          description: Ip do dispositivo que envio o reconhecimento.
          example: 192.168.000.001
        workstationName:
          type: string
          description: Nome da estação de trabalho que o dispositivo que envio o reconhecimento com error
          example: Portão 01
        date:
          type: string
          format: date-time
          description: Momento que o erro aconteceu.
          example: "2021-01-30T08:30:00Z"
        trace:
          type: string
          description: Stacktrace do error gerado
          example: "Caused by: java.lang.NoClassDefFoundError: classError
                    at com.fasterxml.jackson.dataformat.yaml.snakeyaml.error.MarkedYAMLException.from (MarkedYAMLException.java:27)
                    at com.fasterxml.jackson.dataformat.yaml.YAMLParser.nextToken (YAMLParser.java:351)
                    at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeArray (JsonNodeDeserializer.java:431)
                    at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeObject (JsonNodeDeserializer.java:258)
                    at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeObject (JsonNodeDeserializer.java:255)
                    at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeObject (JsonNodeDeserializer.java:255)
                    at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer.deserializeObject (JsonNodeDeserializer.java:255)
                    at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize (JsonNodeDeserializer.java:68)
                    at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize (JsonNodeDeserializer.java:15)
                    at com.fasterxml.jackson.databind.ObjectMapper._readTreeAndClose (ObjectMapper.java:4044)
                  "

  #Responses
  responses:
    #Success
    LoginSuccessResponse:
      description: |-
        Solictação para login, retorna um Token de acesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Token'
    RequestRenewPassResponse:
      description: Solicitação para nova senha aceito.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ProcessResult'
    ConfirmRenewPassResponse:
      description: Confirmação para solicitação para nova senha aceito.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ProcessResult'
    UserRegistrySuccessResponse:
      description: >-
        Registro do usuário foi concluído com sucesso.

        Após os passos de validação, o usuário envio seus dados de cadastro para por fim, completar
        seu cadastro.

        A partir deste ponto o usuário já poderá acessar o sistema normalmente, informando o e-mail e senha cadastrados.


        __Os dados do usuário será retornado para uso do cliente.__
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/User'
    UserOwnerTokenResponse:
      description: >-
        Retorna o usuário correspondente ao token do header
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/User'
    UserAccessResponse:
      description: Retorno para ação.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ProcessResult'
    IncludeNewCarResponse:
      description: Retorna o recurso carro, incluido
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Car'
    RefreshPassSuccessResponse:
      description: >-
        Retornar mensagem de sucesso
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ProcessResult'
    ActiveAccountSuccessResponse:
      description: >-
        Retornar message de sucesso de ativação de conta.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ProcessResult'
    UserPageResponse:
      description: Retorno de uma página com recursos usuários
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PageUser'
    UserGetIdResponse:
      description: Usuário encontrado e retornado com sucesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/User'
    UserCreatedResponse:
      description: Usuário criado com sucesso.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/User'
    UserAccessCarResponse:
      description: Página dos acessos do usuário
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PageUserCarAccess'

    WorkstationsAllResponse:
      description: Lista de todas estações de trabalho
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Workstation'
    WorkstationCreatedResponse:
      description: Estação de trabalho criada com sucesso
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Workstation'
    WorkstationUpdatedResponse:
      description: Estacão de trabalho atualizada com sucesso
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Workstation'
    WorkstationGetterResponse:
      description: Estação de trabalho da solicitação
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Workstation'
    RecognizerPageResponse:
      description: Retorno de uma página com recursos recognizer
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PageRecognizer'
    ErrorRecognizerResponse:
      description: Retorna um erro no processo do reconhecimento.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorRecognizer'
    CarResponse:
      description: Retorna uma lista de 0 à 5 carros.
      content:
        application/json:
          schema:
            items:
              $ref: '#/components/schemas/Car'
    DocumentUriResponse:
      description: Retorna um uri para baixar o documento com tempo de vida util.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/DocumentUri'
    WorkstationSummaryResponse:
      description: Retorna o sumario das estações de trabalho.
      content:
        application/json:
          schema:
            items:
              $ref: '#/components/schemas/WorkstationSummary'
    RecognizerSummaryResponse:
      description: Retonrar um sumário do reconhecimento semanal retroativo.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RecognizerSummary'
    UserCarsSummaryResponse:
      description: Retornar um sumário de carros cadastrados no sistema e seus estados.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UserCarsSummary'
    UserRegistrySummaryResponse:
      description: Retornar um sumário de usuários cadastrados separados por tipos.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UsersRegistrySummary'
    PageCarWaitingDecisionResponse:
      description: Retorna uma página de carros
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PageCarWaitingDecision'


    # errors
    BadRequest:
      description: >
        Requisição está invalida, o corpo da mensagem está mal formatada, por exemplo, campos faltando ou
        campos estão inválidos (formato inválido).
          No corpo da resposta encontrar uma lista de detalhes que dará informações pertinentes para corrigir o erro.
        Para maiores informações consulte a [rfc-7231](https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.1).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: |-
        Recurso não foi encontrado, geralmente a url pode está errada ou recurso pedido não existe.


        Para maiores informações consulte a [rfc-7231](https://httpwg.org/specs/rfc7231.html#status.404).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    Conflict:
      description: |-
        `Requisição` foi aceita mas, os dados enviados está em conflito com o recurso a ser manipulado
        por exemplo: e-mail, placa do carro já foi cadastrada anteriormente para outro usuário.


        Para maiores informações consulte a [rfc-7231](https://httpwg.org/specs/rfc7231.html#status.409).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    UnprocessableEntity:
      description: >
        `Requisição` foi aceita mas, não foi possível concluir com sucesso, devido __alguma regra de negôcio__
        por exemplo: validações, papeis de usuário não confere com o tipo de usuário.


        Para maiores informações consulte a [rfc-4918](https://datatracker.ietf.org/doc/html/rfc4918#section-11.2).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    InternalServerError:
      description: >
        Error inesperado em alguma parte do processo, neste caso a api não conseguiu se recuperar
        do error.


        Caso isto ocorra, por favor, notifique o momento do erro, crie uma issue no __repositório__ da aplicação explicando
        os detalhes de como aconteceu o error.


        Para maiores informações consulte a [rfc-7231](https://datatracker.ietf.org/doc/html/rfc7231#section-6.6.1).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    Unauthorized:
      description: >
        Acesso negado, usuário não está autenticado.


        Caso isto ocorra, por favor, solicite uma token de acesso, verifique a sessão seguração para mais informações


        Para maiores informações consulte a [rfc-7235](https://httpwg.org/specs/rfc7235.html#status.401).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    Forbidden:
      description: >
        Acesso bloqueado, usuário não tem permissão para acessar o recurso.


        Caso isto ocorra, por favor, verifique o papel necessário para acessar o recurso desejado.


        Para maiores informações consulte a [rfc-7231](https://httpwg.org/specs/rfc7231.html#status.403).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'


